<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="icon" type="image/x-icon" href="/img/icon.png">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="style/style.css">
        <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js'></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    </head>
    <body style="background-color: #f7b3d0;overflow-x: hidden;">
        <!-- <div class="preloader-wrapper">
            <div class="spinner-grow text-primary">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div> -->
        
        <main class="d-flex flex-nowrap">
            <div class="d-flex flex-column flex-shrink-0 p-3" style="width: 380px;position: fixed;height: 100vh;background-color: #ee5294;">
                <a style="cursor: default" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                    <img src="img/icon.png" width="40" height="32"/>
                    <span class="fs-4">Chula Calendar</span>
                </a>
                <hr>
                <ul class="nav nav-pills flex-column mb-auto">
                    <div id="mainmenu">
                        <li class="nav-item">
                            <a onclick="loadpage('home')" class="nav-link text-white active" id="home">
                                <i class="bi bi-house"></i>
                                Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <a onclick="loadpage('profile')" class="nav-link text-white" id="profile">
                                <i class="bi bi-person-circle"></i>
                                Profile
                            </a>
                        </li>
                        <li class="nav-item">
                            <a onclick="loadpage('event')" class="nav-link text-white" id="event">
                                <i class="bi bi-calendar-event"></i>
                                Events
                            </a>
                        </li>
                        <li class="nav-item">
                            <a onclick="loadpage('subject')" class="nav-link text-white" id="subject">
                                <i class="bi bi-bookmark-plus"></i>
                                Subjects
                            </a>
                        </li>
                        <li class="nav-item">
                            <a onclick="loadpage('fft')" class="nav-link text-white" id="fft">
                                <i class="bi bi-clock-history"></i>
                                Find free time
                            </a>
                        </li>
                        <li class="nav-item">
                            <a onclick="loadpage('schgen')" class="nav-link text-white" id="schgen">
                                <i class="bi bi-calendar-range"></i>
                                Generate timetables
                            </a>
                        </li>
                    </div>
                    <div id="regis">
                        <h1 style="color: white;">Sign up</h1>

                        <label for="fn" style="color: white;">Firstname</label>
                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <input type="text" class="form-control" placeholder="Firstname" id="fn">
                        </div>

                        <label for="ln" style="color: white;">Lastname</label>
                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <input type="text" class="form-control" placeholder="Lastname" id="ln">
                        </div>

                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i style="font-size: 1.5em;" class="bi bi-person-circle"></i></span>
                            </div>
                            <input type="text" class="form-control" placeholder="Username" id="uname">
                        </div>

                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i style="font-size: 1.5em;" class="bi bi-person-vcard"></i></span>
                            </div>
                            <input type="text" class="form-control" placeholder="Student ID" id="sid2">
                        </div>

                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i style="font-size: 1.5em;" class="bi bi-key-fill"></i></span>
                            </div>
                            <input type="password" class="form-control" placeholder="Password" id="pass21" onkeyup="cpwrqm()">
                        </div>
                        <ul id="cpwrqm"></ul>

                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i style="font-size: 1.5em;" class="bi bi-key-fill"></i></span>
                            </div>
                            <input type="password" class="form-control" placeholder="Confirm Password" id="pass22" onkeyup="ccpw()">
                        </div>
                        <div id="ccpw"></div>
                        <a style="color:white">Already have an account?<a class="subt" onclick="setmenu('login')">Sign in</a></a>
                    </div>
                    <div id="login">
                        <h1 style="color: white;">Sign in</h1>
                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i style="font-size: 1.5em;" class="bi bi-fingerprint"></i></span>
                            </div>
                            <input type="text" class="form-control" placeholder="Student ID" id="sid1">
                        </div>
                        <div class="input-group mb-3" style="background-color: white;border-radius: var(--bs-border-radius);">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i style="font-size: 1.5em;" class="bi bi-key-fill"></i></span>
                            </div>
                            <input type="password" class="form-control" placeholder="Password" id="pass1">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" id="vb1" style="font-size: 1.5em;" onclick="showpass('pass1', 'vb1')" type="button"><i class="bi bi-eye-slash"></i></button>
                            </div>
                        </div>
                        <a><a class="fgpw">Forgot password?</a><a class="subt" onclick="setmenu('regis')">Sign up</a></a>
                    </div>
                </ul>
                <hr>
                <div class="dropdown">
                    <a id="lobut" onclick="logout()" class="nav-link text-white lobut but">
                        <strong>
                            <i class="bi bi-caret-left-fill"></i>
                            Log out
                        </strong>
                    </a>
                    <a id="libut" class="nav-link text-white libut but" onclick="login()">
                        <strong>
                            <i class="bi bi-caret-right-fill"></i>
                            Sign in
                        </strong>
                    </a>
                    <a id="regbut" class="nav-link text-white regbut but" onclick="regis()">
                        <strong>
                            <i class="bi bi-caret-up-fill"></i>
                            Sign up
                        </strong>
                    </a>
                </div>
            </div>
            <div class="content"></div>
        </main>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" src="js/api.js"></script>
        <script>
            askcookie()
            if(getCookie("sid") != '' && getCookie("token") != ''){
                setmenu("main")
            }else{
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                if(!urlParams.has('menu') || urlParams.get('menu') != 'regis'){
                    setmenu("login")
                }else{
                    setmenu("regis")
                }
            }
            setpage()
        </script>
    </body>
</html>
